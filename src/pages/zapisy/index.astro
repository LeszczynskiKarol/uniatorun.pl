---
import Layout from "@/layouts/Layout.astro";

// SEO Data
const seoTitle =
  "Zapisy na treningi pi≈Çkarskie Toru≈Ñ ‚Äì Zapisz dziecko | Unia Toru≈Ñ";
const seoDescription =
  "Zapisz dziecko na treningi pi≈Çkarskie w Toruniu. Formularz zapis√≥w online do Akademii Pi≈Çkarskiej Unia Toru≈Ñ. Pierwszy trening gratis! Grupy 3-13 lat.";
const seoKeywords = [
  "zapisy na treningi pi≈Çkarskie Toru≈Ñ",
  "zapisz dziecko na pi≈Çkƒô no≈ºnƒÖ",
  "zapisy szk√≥≈Çka pi≈Çkarska Toru≈Ñ",
  "formularz zapisu pi≈Çka no≈ºna",
  "treningi pi≈Çkarskie dla dzieci zapisy",
];

// Grupy wiekowe
const ageGroups = [
  {
    value: "przedszkole",
    label: "Przedszkole pi≈Çkarskie (3-6 lat)",
    ages: "2019-2022",
  },
  { value: "zak", label: "≈ªak U-9 (7-9 lat)", ages: "2016-2018" },
  { value: "orlik", label: "Orlik U-11 (9-11 lat)", ages: "2014-2016" },
  { value: "mlodzik", label: "M≈Çodzik U-13 (11-13 lat)", ages: "2012-2014" },
];

// Co zawiera zapis
const includesList = [
  { icon: "üëï", text: "Str√≥j treningowy w barwach klubu" },
  { icon: "üõ°Ô∏è", text: "Ubezpieczenie NNW" },
  { icon: "‚öΩ", text: "2-3 treningi tygodniowo" },
  { icon: "üèÜ", text: "Udzia≈Ç w turniejach i sparingach" },
  { icon: "üì±", text: "Dostƒôp do grupy rodzica" },
  { icon: "üéÅ", text: "Pierwszy trening GRATIS" },
];
---

<Layout title={seoTitle} description={seoDescription} keywords={seoKeywords}>
  <!-- Hero Section -->
  <section
    class="relative py-16 md:py-20 overflow-hidden bg-gradient-to-br from-dark-900 via-dark-950 to-primary-950"
  >
    <div class="absolute inset-0 football-pattern opacity-50"></div>
    <div
      class="absolute top-20 right-10 w-72 h-72 bg-primary-500/20 rounded-full blur-3xl animate-pulse-glow"
    >
    </div>
    <div
      class="absolute bottom-20 left-10 w-96 h-96 bg-primary-600/10 rounded-full blur-3xl"
    >
    </div>

    <div class="container-custom relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <nav
          class="flex items-center justify-center gap-2 text-dark-400 text-sm mb-6"
        >
          <a href="/" class="hover:text-white transition-colors"
            >Strona g≈Ç√≥wna</a
          >
          <svg
            class="w-4 h-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"></path>
          </svg>
          <span class="text-white">Zapisy</span>
        </nav>

        <div
          class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-500/20 border border-green-500/30 text-green-300 text-sm font-medium mb-6"
        >
          <span class="relative flex h-2 w-2">
            <span
              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"
            ></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"
            ></span>
          </span>
          Rekrutacja otwarta ‚Äì sezon 2025/2026
        </div>

        <h1 class="text-white mb-6 animate-fade-in-up">
          <span class="gradient-text">Zapisz dziecko</span> na treningi
        </h1>

        <p
          class="text-xl md:text-2xl text-dark-300 mb-8 leading-relaxed animate-fade-in-up animation-delay-200 max-w-3xl mx-auto"
        >
          Wype≈Çnij formularz, a oddzwonimy w ciƒÖgu <strong class="text-white"
            >24 godzin</strong
          >, ≈ºeby um√≥wiƒá pierwszy bezp≈Çatny trening!
        </p>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="section-padding bg-white dark:bg-dark-900">
    <div class="container-custom">
      <div class="grid lg:grid-cols-5 gap-12">
        <!-- Form Column -->
        <div class="lg:col-span-3">
          <div class="card p-8">
            <h2
              class="text-2xl font-display font-bold text-dark-900 dark:text-white mb-6"
            >
              Formularz zapisu
            </h2>

            <form id="signup-form" class="space-y-6">
              <!-- Parent Info -->
              <div class="space-y-4">
                <h3
                  class="text-lg font-semibold text-dark-900 dark:text-white flex items-center gap-2"
                >
                  <span
                    class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/50 flex items-center justify-center text-primary-600 dark:text-primary-400 text-sm font-bold"
                    >1</span
                  >
                  Dane rodzica/opiekuna
                </h3>

                <div class="grid sm:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="parentName"
                      class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                    >
                      Imiƒô i nazwisko *
                    </label>
                    <input
                      type="text"
                      id="parentName"
                      name="parentName"
                      required
                      class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                      placeholder="Jan Kowalski"
                    />
                  </div>
                  <div>
                    <label
                      for="phone"
                      class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                    >
                      Telefon kontaktowy *
                    </label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      required
                      class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                      placeholder="500 000 000"
                    />
                  </div>
                </div>

                <div>
                  <label
                    for="email"
                    class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                  >
                    Adres email *
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                    placeholder="jan.kowalski@email.com"
                  />
                </div>
              </div>

              <!-- Child Info -->
              <div
                class="space-y-4 pt-4 border-t border-dark-100 dark:border-dark-800"
              >
                <h3
                  class="text-lg font-semibold text-dark-900 dark:text-white flex items-center gap-2"
                >
                  <span
                    class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/50 flex items-center justify-center text-primary-600 dark:text-primary-400 text-sm font-bold"
                    >2</span
                  >
                  Dane dziecka
                </h3>

                <div class="grid sm:grid-cols-2 gap-4">
                  <div>
                    <label
                      for="childName"
                      class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                    >
                      Imiƒô dziecka *
                    </label>
                    <input
                      type="text"
                      id="childName"
                      name="childName"
                      required
                      class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                      placeholder="Kacper"
                    />
                  </div>
                  <div>
                    <label
                      for="birthYear"
                      class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                    >
                      Rok urodzenia *
                    </label>
                    <select
                      id="birthYear"
                      name="birthYear"
                      required
                      class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                    >
                      <option value="">Wybierz rok</option>
                      <option value="2022">2022</option>
                      <option value="2021">2021</option>
                      <option value="2020">2020</option>
                      <option value="2019">2019</option>
                      <option value="2018">2018</option>
                      <option value="2017">2017</option>
                      <option value="2016">2016</option>
                      <option value="2015">2015</option>
                      <option value="2014">2014</option>
                      <option value="2013">2013</option>
                      <option value="2012">2012</option>
                    </select>
                  </div>
                </div>

                <div>
                  <label
                    for="ageGroup"
                    class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                  >
                    Preferowana grupa *
                  </label>
                  <select
                    id="ageGroup"
                    name="ageGroup"
                    required
                    class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                  >
                    <option value="">Wybierz grupƒô</option>
                    {
                      ageGroups.map((group) => (
                        <option value={group.value}>{group.label}</option>
                      ))
                    }
                  </select>
                  <p class="text-xs text-dark-500 dark:text-dark-400 mt-1">
                    Trener mo≈ºe zaproponowaƒá innƒÖ grupƒô po ocenie umiejƒôtno≈õci
                  </p>
                </div>
              </div>

              <!-- Additional Info -->
              <div
                class="space-y-4 pt-4 border-t border-dark-100 dark:border-dark-800"
              >
                <h3
                  class="text-lg font-semibold text-dark-900 dark:text-white flex items-center gap-2"
                >
                  <span
                    class="w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/50 flex items-center justify-center text-primary-600 dark:text-primary-400 text-sm font-bold"
                    >3</span
                  >
                  Informacje dodatkowe
                </h3>

                <div>
                  <label
                    for="experience"
                    class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                  >
                    Do≈õwiadczenie pi≈Çkarskie dziecka
                  </label>
                  <select
                    id="experience"
                    name="experience"
                    class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                  >
                    <option value="brak">Brak ‚Äì pierwszy kontakt z pi≈ÇkƒÖ</option
                    >
                    <option value="rekreacyjne"
                      >Rekreacyjne ‚Äì gra z kolegami</option
                    >
                    <option value="podstawowe"
                      >Podstawowe ‚Äì by≈Ço w innym klubie/szk√≥≈Çce</option
                    >
                    <option value="zaawansowane"
                      >Zaawansowane ‚Äì trenowa≈Ço regularnie</option
                    >
                  </select>
                </div>

                <div>
                  <label
                    for="message"
                    class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                  >
                    Dodatkowe uwagi
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    rows="3"
                    class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none"
                    placeholder="Np. alergie, kontuzje, preferowane dni trening√≥w..."
                  ></textarea>
                </div>

                <div>
                  <label
                    for="source"
                    class="block text-sm font-medium text-dark-700 dark:text-dark-300 mb-2"
                  >
                    SkƒÖd dowiedzia≈Çe≈õ siƒô o nas?
                  </label>
                  <select
                    id="source"
                    name="source"
                    class="w-full px-4 py-3 rounded-xl border border-dark-200 dark:border-dark-700 bg-white dark:bg-dark-800 text-dark-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                  >
                    <option value="">Wybierz</option>
                    <option value="google">Google / wyszukiwarka</option>
                    <option value="facebook">Facebook / Instagram</option>
                    <option value="znajomi">Od znajomych</option>
                    <option value="ulotka">Ulotka / plakat</option>
                    <option value="inne">Inne</option>
                  </select>
                </div>
              </div>

              <!-- Consent -->
              <div
                class="space-y-3 pt-4 border-t border-dark-100 dark:border-dark-800"
              >
                <label class="flex items-start gap-3 cursor-pointer">
                  <input
                    type="checkbox"
                    name="consent"
                    required
                    class="mt-1 w-5 h-5 rounded border-dark-300 text-primary-500 focus:ring-primary-500"
                  />
                  <span class="text-sm text-dark-600 dark:text-dark-400">
                    Wyra≈ºam zgodƒô na przetwarzanie danych osobowych w celu
                    realizacji zapisu na treningi zgodnie z <a
                      href="/polityka-prywatnosci"
                      class="text-primary-500 hover:underline"
                      >PolitykƒÖ Prywatno≈õci</a
                    >. *
                  </span>
                </label>
              </div>

              <!-- Submit -->
              <div class="pt-4">
                <button
                  type="submit"
                  id="submit-btn"
                  class="w-full btn-primary text-lg py-4"
                >
                  <span id="btn-text">Wy≈õlij zg≈Çoszenie</span>
                  <svg
                    id="btn-spinner"
                    class="hidden animate-spin h-5 w-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    >
                    </path>
                  </svg>
                </button>
              </div>

              <!-- Status Messages -->
              <div
                id="form-success"
                class="hidden p-4 rounded-xl bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-center"
              >
                <svg
                  class="w-12 h-12 mx-auto mb-3 text-green-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="font-semibold text-lg">Zg≈Çoszenie wys≈Çane!</p>
                <p class="text-sm mt-1">
                  Oddzwonimy w ciƒÖgu 24 godzin, ≈ºeby um√≥wiƒá pierwszy trening.
                </p>
              </div>

              <div
                id="form-error"
                class="hidden p-4 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-center"
              >
                <svg
                  class="w-12 h-12 mx-auto mb-3 text-red-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
                <p class="font-semibold">WystƒÖpi≈Ç b≈ÇƒÖd</p>
                <p class="text-sm mt-1">
                  Spr√≥buj ponownie lub zadzwo≈Ñ: <a
                    href="tel:+48517740146"
                    class="underline">517 740 146</a
                  >
                </p>
              </div>
            </form>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-2 space-y-6">
          <!-- What's Included -->
          <div class="card p-6">
            <h3
              class="text-lg font-display font-bold text-dark-900 dark:text-white mb-4"
            >
              Co zawiera zapis?
            </h3>
            <ul class="space-y-3">
              {
                includesList.map((item) => (
                  <li class="flex items-center gap-3">
                    <span class="text-2xl">{item.icon}</span>
                    <span class="text-dark-600 dark:text-dark-300">
                      {item.text}
                    </span>
                  </li>
                ))
              }
            </ul>
          </div>

          <!-- Contact Box -->
          <div
            class="card p-6 bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800"
          >
            <h3
              class="text-lg font-display font-bold text-dark-900 dark:text-white mb-4"
            >
              Wolisz zadzwoniƒá?
            </h3>
            <p class="text-dark-600 dark:text-dark-300 mb-4">
              Nasz koordynator odpowie na wszystkie pytania i pomo≈ºe wybraƒá
              odpowiedniƒÖ grupƒô.
            </p>
            <a
              href="tel:+48517740146"
              class="flex items-center gap-3 text-xl font-bold text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                ></path>
              </svg>
              517 740 146
            </a>
          </div>

          <!-- FAQ Mini -->
          <div class="card p-6">
            <h3
              class="text-lg font-display font-bold text-dark-900 dark:text-white mb-4"
            >
              Najczƒôstsze pytania
            </h3>
            <div class="space-y-4 text-sm">
              <div>
                <p class="font-semibold text-dark-900 dark:text-white">
                  Ile kosztujƒÖ treningi?
                </p>
                <p class="text-dark-600 dark:text-dark-300 mt-1">
                  Sk≈Çadka miesiƒôczna zale≈ºy od grupy. Szczeg√≥≈Çy podamy podczas
                  rozmowy telefonicznej.
                </p>
              </div>
              <div>
                <p class="font-semibold text-dark-900 dark:text-white">
                  Czy pierwszy trening jest p≈Çatny?
                </p>
                <p class="text-dark-600 dark:text-dark-300 mt-1">
                  Nie! Pierwszy trening pr√≥bny jest ca≈Çkowicie bezp≈Çatny.
                </p>
              </div>
              <div>
                <p class="font-semibold text-dark-900 dark:text-white">
                  Co zabraƒá na trening?
                </p>
                <p class="text-dark-600 dark:text-dark-300 mt-1">
                  Str√≥j sportowy, buty pi≈Çkarskie (turfy), ochraniacz na
                  golenie, bidon z wodƒÖ.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  const form = document.getElementById("signup-form") as HTMLFormElement;
  const submitBtn = document.getElementById("submit-btn") as HTMLButtonElement;
  const btnText = document.getElementById("btn-text") as HTMLElement;
  const btnSpinner = document.getElementById("btn-spinner") as HTMLElement;
  const successMsg = document.getElementById("form-success") as HTMLElement;
  const errorMsg = document.getElementById("form-error") as HTMLElement;

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Show loading state
    submitBtn.disabled = true;
    btnText.textContent = "Wysy≈Çanie...";
    btnSpinner.classList.remove("hidden");
    successMsg.classList.add("hidden");
    errorMsg.classList.add("hidden");

    const formData = new FormData(form);

    // Build message content
    const messageContent = `
NOWE ZG≈ÅOSZENIE NA TRENINGI

DANE RODZICA:
- Imiƒô i nazwisko: ${formData.get("parentName")}
- Telefon: ${formData.get("phone")}
- Email: ${formData.get("email")}

DANE DZIECKA:
- Imiƒô: ${formData.get("childName")}
- Rok urodzenia: ${formData.get("birthYear")}
- Preferowana grupa: ${formData.get("ageGroup")}
- Do≈õwiadczenie: ${formData.get("experience")}

DODATKOWE INFORMACJE:
- Uwagi: ${formData.get("message") || "Brak"}
- ≈πr√≥d≈Ço: ${formData.get("source") || "Nie podano"}
- Zgoda marketing: ${formData.get("marketing") ? "Tak" : "Nie"}
    `.trim();

    try {
      const response = await fetch(
        "https://4xz7pkbd51.execute-api.eu-north-1.amazonaws.com/prod/send",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            name: formData.get("parentName"),
            email: formData.get("email"),
            subject: `Zapis na treningi: ${formData.get("childName")} (${formData.get("ageGroup")})`,
            message: messageContent,
            domain: "uniatorun.pl",
          }),
        }
      );

      if (response.ok) {
        form.classList.add("hidden");
        successMsg.classList.remove("hidden");
      } else {
        throw new Error("B≈ÇƒÖd wysy≈Çania");
      }
    } catch (error) {
      errorMsg.classList.remove("hidden");
    } finally {
      submitBtn.disabled = false;
      btnText.textContent = "Wy≈õlij zg≈Çoszenie";
      btnSpinner.classList.add("hidden");
    }
  });
</script>
